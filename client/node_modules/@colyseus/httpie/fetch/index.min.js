!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t["@colyseus/httpie"]={})}(this,(function(t){function e(t,e){e.statusMessage=t.statusText,e.statusCode=t.status,e.data=t.body}function n(t,n,i){var a,o,s,d=!1,r=(i=i||{}).body;return i.method=t,i.headers=i.headers||{},r instanceof FormData||r&&"object"==typeof r&&(i.headers["content-type"]="application/json",i.body=JSON.stringify(r)),i.withCredentials&&(i.credentials="include"),i.timeout&&(i.signal||(s=new AbortController,i.signal=s.signal),a=setTimeout((function(){d=!0,s.signal.dispatchEvent(new Event("abort"))}),i.timeout)),i.signal&&i.signal.addEventListener("abort",(function(){o=!0})),new Promise((t,s)=>{fetch(n,i).then((n,a)=>{e(n,n),a=n.status>=400?s:t,(r=n.headers.get("content-type"))&&~r.indexOf("application/json")?n.text().then(t=>{try{n.data=JSON.parse(t,i.reviver),a(n)}catch(t){t.headers=n.headers,e(n,t),s(t)}}):a(n)}).catch(t=>{t.timeout=d,t.aborted=o&&!d,s(t)}).finally(()=>{clearTimeout(a)})})}var i=n.bind(n,"GET"),a=n.bind(n,"POST"),o=n.bind(n,"PATCH"),s=n.bind(n,"DELETE"),d=n.bind(n,"PUT");t.del=s,t.get=i,t.patch=o,t.post=a,t.put=d,t.send=n}));